# 网络应用程序接口设计

对于一个健壮的应用程序，可扩展，可维护的接口很重要

## HTTP 路径

* 路径长度要简短，好记
* 不要使用除了英文字母和`-`，`/`，`+`，`_`，`!`之外的字符

## HTTP 动作

* 使用GET方式请求资源
  + 用户可以收藏资源，浏览器可以缓存资源
  + 防止用户刷新或者检索时，破坏资源
* 使用POST方式改变资源
  + 大于2048字节的限制，可以上传多媒体
* 不用PUT，DELETE等其它方式交互资源
  + Form表单仅支持GET, POST

## HTTP 参数

* s或sort表示排序
  + `!`或`-`表示逆序
  + `+`或`，`分隔多个字段
* filter,f-开始的参数表示过滤
  + `!`或`-`表示逻辑非
  + `+`或`,`表示字段要在指定的集合中
* p或page表示分页，l或limit表示页面数量限制
  + 对于集合类资源，必须分页，避免消耗多余资源
  + 分页默认值为首页，limit的最大值要限制
* 其它参数避免使用上述的名称

## HTTP 返回码

* 200 请求或者操作资源成功
* 404 未找到资源

## HTTP 权限

* 使用令牌(token)代替密码
* 使用请求时间来判断访问的请求是否过期
  + 按照顺序的资源操作

## API举例

```
GET /resourse/1 #得到编号为1的资源
POST /resourse/1/delete #删除编号为1的资源
# 请求最近删除的资源集合
GET /resourses?f-removed=true&s=!updated_at&p=1
# 请求处于1,3状态的非图片资源
GET /resourses?f-status=1,3&f-type=-image
```
